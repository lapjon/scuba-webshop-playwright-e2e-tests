<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Gear - Deep Dive</title>
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/gear.css">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="header-placeholder"></div>
    <main>
        <section class="gear-items">
            <h2>Browse Our Gear</h2>
            <div class="items-container">
                <!-- All 12 gear items -->
                <div class="item">
                    <img src="/images/mask_snorkel.webp" alt="Mask & Snorkel Set">
                    <h3>Mask & Snorkel Set</h3>
                    <p>Price: $29.99</p>
                    <button class="add-to-basket" onclick="addToBasket(1, 'Mask & Snorkel Set', 29.99)">Add to Cart</button>
              
                </div>
                <div class="item">
                    <img src="/images/full_body_wetsuit.webp" alt="Full Body Wetsuit">
                    <h3>Full Body Wetsuit</h3>
                    <p>Price: $149.99</p>
                    <button class="add-to-basket" onclick="addToBasket(2, 'Full Body Wetsuit', 149.99)">Add to Cart</button>
                  
                </div>
                <div class="item">
                    <img src="/images/diving_fins.webp" alt="Diving Fins">
                    <h3>Diving Fins</h3>
                    <p>Price: $69.99</p>
                    <button class="add-to-basket" onclick="addToBasket(3, 'Diving Fins', 69.99)">Add to Cart</button>
                  
                </div>
                <div class="item">
                    <img src="/images/dive_computer.webp" alt="Dive Computer">
                    <h3>Dive Computer</h3>
                    <p>Price: $295.99</p>
                    <button class="add-to-basket" onclick="addToBasket(4, 'Dive Computer', 295.99)">Add to Cart</button>
                  
                </div>
                <div class="item">
                    <img src="/images/oxygen_tank.webp" alt="Oxygen Tank">
                    <h3>Oxygen Tank</h3>
                    <p>Price: $214.99</p>
                    <button class="add-to-basket" onclick="addToBasket(5, 'Oxygen Tank', 214.99)">Add to Cart</button>
                  
                </div>
                <div class="item">
                    <img src="/images/shorty_wetsuit.webp" alt="Shorty Wetsuit">
                    <h3>Shorty Wet Suit</h3>
                    <p>Price: $89.99</p>
                    <button class="add-to-basket" onclick="addToBasket(6, 'Shorty Wetsuit', 89.99)">Add to Cart</button>
                
                </div>
                <div class="item">
                    <img src="/images/diving_boots.webp" alt="Diving Boots">
                    <h3>Diving Boots</h3>
                    <p>Price: $26.99</p>
                    <button class="add-to-basket" onclick="addToBasket(7, 'Diving Boots', 26.99)">Add to Cart</button>
           
                </div>
                <div class="item">
                    <img src="/images/regulator_set.png" alt="Regulator Set">
                    <h3>Regulator Set</h3>
                    <p>Price: $385.99</p>
                    <button class="add-to-basket" onclick="addToBasket(8, 'Regulator Set', 385.99)">Add to Cart</button>
                   
                </div>
                <div class="item">
                    <img src="/images/bcd.webp" alt="Buoyancy Control Device">
                    <h3>Buoyancy Control Device</h3>
                    <p>Price: $495.99</p>
                    <button class="add-to-basket" onclick="addToBasket(9, 'Buoyancy Control Device', 495.99)">Add to Cart</button>
           
                </div>
                <div class="item">
                    <img src="/images/gear_bag.webp" alt="Gear Bag">
                    <h3>Gear Bag</h3>
                    <p>Price: $49.99</p>
                    <button class="add-to-basket" onclick="addToBasket(10, 'Gear Bag', 49.99)">Add to Cart</button>
               
                </div>
                <div class="item">
                    <img src="/images/underwater_camera.webp" alt="Underwater Camera">
                    <h3>Underwater Camera</h3>
                    <p>Price: $595.99</p>
                    <button class="add-to-basket" onclick="addToBasket(11, 'Underwater Camera', 595.99)">Add to Cart</button>
             
                </div>
                <div class="item">
                    <img src="/images/diving_torch.webp" alt="Dive Torch">
                    <h3>Dive Torch</h3>
                    <p>Price: $39.99</p>
                    <button class="add-to-basket" onclick="addToBasket(12, 'Dive Torch', 39.99)">Add to Cart</button>
                
                </div>
            </div>
        </section>
    </main>
    <footer>
        Dive Shop
    </footer>

    <script>
        // Load the reusable header dynamically
    document.addEventListener("DOMContentLoaded", function () {
        fetch('/header.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('header-placeholder').innerHTML = data;

                // Dynamically update the cart counter
                const basketCounter = document.getElementById('basket-counter');
                const loginLink = document.getElementById('login-link');
                const loggedInUser = document.getElementById('logged-in-user');
                const userEmailElement = document.getElementById('user-email');
                const basket = JSON.parse(localStorage.getItem('basket')) || [];
                const userEmail = localStorage.getItem('userEmail');
                const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';

                // Debugging: Log the state for testing
                console.log('Basket:', basket);
                console.log('isLoggedIn:', isLoggedIn);
                console.log('userEmail:', userEmail);

                if (basketCounter) {
                    basketCounter.textContent = basket.length;
                }

                if (isLoggedIn && userEmail) {
                    loggedInUser.style.display = 'inline';
                    userEmailElement.textContent = userEmail;
                    loginLink.style.display = 'none';

                    // Attach logout functionality to the Logout link
                    const logoutLink = document.getElementById('logout-link');
                    if (logoutLink) {
                        logoutLink.addEventListener('click', function (event) {
                            event.preventDefault();
                            // Clear login-related data
                            localStorage.removeItem('isLoggedIn');
                            localStorage.removeItem('userEmail');
                            // Redirect to the welcome page
                            window.location.href = '/welcome.html';
                        });
                    }
                } else {
                    loggedInUser.style.display = 'none';
                    loginLink.style.display = 'inline';
                }
            })
            .catch(error => console.error('Error loading header:', error));
    });

        function updateBasketCounter() {
            const basket = JSON.parse(localStorage.getItem('basket')) || [];
            const basketCounter = document.getElementById('basket-counter');
            if (basketCounter) {
                basketCounter.textContent = basket.length;
            }
        }
    
        // Add item to basket function
        function addToBasket(id, name, price) {
            const basket = JSON.parse(localStorage.getItem('basket')) || [];
            basket.push({ id, name, price });
            localStorage.setItem('basket', JSON.stringify(basket));
            alert(`${name} has been added to your basket!`); // Display the alert
            updateBasketCounter(); // Update the counter after adding an item
        }
    </script>